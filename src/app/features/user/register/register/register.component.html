<loading-container
  *ngIf="isLoading"
  [height]="500"
></loading-container>
<div
  *ngIf="!isLoading"
  class="register"
>
  <div class="left-section">
    <div class="title">Cadastro de Usuário</div>

    <form
      class="form-content"
      [formGroup]="registerUserForm"
      (ngSubmit)="onSubmit()"
    >
      <mat-form-field class="field">
        <mat-label>Nome completo</mat-label>
        <input
          formControlName="nomeCompleto"
          type="text"
          matInput
          placeholder="Nome completo"
        />
        <mat-error>Nome inválido</mat-error>
      </mat-form-field>

      <div class="contact">
        <mat-form-field class="field">
          <mat-label>E-mail</mat-label>
          <input
            type="email"
            formControlName="email"
            matInput
            placeholder="Ex: email@email.com"
          />
          <mat-error>Informe um e-mail válido</mat-error>
        </mat-form-field>
        <mat-form-field class="field">
          <mat-label>Telefone</mat-label>
          <input
            type="tel"
            mask="(00) 00000-0000"
            formControlName="phoneNumber"
            matInput
            placeholder="Ex: (61) 94843-2443"
          />
          <mat-error>Informe um telefone válido</mat-error>
        </mat-form-field>
      </div>

      <mat-form-field>
        <mat-label>Selecione uma permissão</mat-label>
        <mat-select
          formControlName="perfil"
          [(ngModel)]="perfil"
        >
          <mat-option
            *ngFor="let role of roles"
            [value]="role.name"
          >
            {{ role.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="contact">
        <mat-form-field class="field">
          <mat-label>Senha</mat-label>
          <input
            formControlName="password"
            type="password"
            matInput
            placeholder="Digite sua senha"
          />
        </mat-form-field>

        <mat-form-field class="field">
          <mat-label>Confirmar senha</mat-label>
          <input
            formControlName="confirmPassword"
            type="password"
            matInput
            placeholder="Confirma a senha"
          />
          <mat-error
            *ngIf="registerUserForm.get('confirmPassword')?.errors?.['mustMatch']
              && registerUserForm.get('confirmPassword')?.touched"
          >
            As senhas não são iguais
          </mat-error>
        </mat-form-field>
      </div>

      <div class="action-button">
        <button
          class="login-button"
          color="primary"
          mat-raised-button
          type="submit"
        >
          {{ userId > 0 ? "Atualizar" : "Cadastrar" }}
        </button>
        <button
          *ngIf="!userId"
          color="primary"
          (click)="resetForm()"
          mat-button
          type="button"
        >
          Limpar
        </button>
      </div>
    </form>
  </div>

  <div class="right-section">
    <!-- <app-logo></app-logo> -->
    <!-- <button mat-stroked-button color="primary" routerLink="/inicio">
      <mat-icon class="material-icons-outlined"> arrow_back </mat-icon>
      Página anterior
    </button> -->

    <div class="page-image">
      <div class="image"></div>
    </div>
  </div>
</div>
